(this.webpackJsonpzfw=this.webpackJsonpzfw||[]).push([[15],{347:function(t,e,n){},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(51);var r=n(52),a=n.n(r),i=n(70),c=n.n(i),o=n(38),u="https://api-haoke-web.itheima.net",s=c.a.create({baseURL:u});s.interceptors.request.use((function(t){a.a.loading("Loading...",0);var e=t.url,n=t.headers;return e.startsWith("/user")&&!["/user/registered","/user/login"].includes(e)&&(n.authorization=Object(o.d)()),t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return a.a.hide(),{body:t.data.body,description:t.data.description,status:t.data.status}}),(function(t){return Promise.reject(t)})),e.b=s},38:function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return p}));var r=n(40),a=n.n(r),i=n(41),c=n(48),o="curr_city",u="HKZF_TOKEN";function s(t,e){return window.localStorage.setItem(t,e)}function f(t){return localStorage.getItem(t)}function l(){return f(u)}function d(){var t;console.log("1"),t=u,localStorage.removeItem(t)}var p=function(){return!!l()},m=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){(new window.BMap.LocalCity).get((function(e){t(e.name)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function y(){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse(f(o)),t.next=3,m();case 3:if(n=t.sent,r=n.substr(0,2),e&&r===e.label){t.next=9;break}return t.abrupt("return",new Promise(function(){var t=Object(i.a)(a.a.mark((function t(e,n){var i,u,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)(r);case 2:i=t.sent,u=i.status,f=i.body,200===u?(s(o,JSON.stringify(f)),e(f)):n("error");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",Promise.resolve(e));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},395:function(t,e,n){"use strict";n.r(e);var r=n(40),a=n.n(r),i=n(41),c=(n(56),n(58)),o=n.n(c),u=(n(74),n(75)),s=n.n(u),f=(n(51),n(52)),l=n.n(f),d=n(43),p=n(44),m=n(46),y=n(45),h=n(0),v=n.n(h),b=n(48),g=n(38),x=n(219),w=(n(347),function(t){Object(m.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(t=e.call.apply(e,[this].concat(c))).state={CityList:{},cityIndex:[],activeIndex:0},t.formatCityList=function(t){var e,n={};return t.forEach((function(t){var e=t.short.slice(0,1);n[e]?n[e].push(t):n[e]=[t]})),e=Object.keys(n).sort(),{CityList:n,cityIndex:e}},t.formatLetter=function(t,e){switch(t){case"#":return e?"\u5f53":"\u5f53\u524d\u57ce\u5e02";case"hot":return e?"\u70ed":"\u70ed\u95e8\u57ce\u5e02";default:return t.toUpperCase()}},t.changeCity=function(e){["\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733"].includes(e.label)?(Object(g.g)(g.a,JSON.stringify(e)),t.props.history.push("/")):l.a.info("\u8be5\u57ce\u5e02\u6682\u65e0\u623f\u6e90\u6570\u636e")},t.rowRenderer=function(e){var n=e.key,r=e.index,a=(e.isScrolling,e.isVisible,e.style),i=t.state,c=i.cityIndex,o=i.CityList,u=c[r],s=o[u];return v.a.createElement("div",{key:n,style:a,className:"city-item"},v.a.createElement("div",{className:"title"},t.formatLetter(u)),s.map((function(e){return v.a.createElement("div",{key:e.value,onClick:function(){t.changeCity(e)},className:"name"},e.label)})))},t.navbai=function(){return v.a.createElement(o.a,{mode:"dark",icon:v.a.createElement(s.a,{type:"left"}),onLeftClick:function(){return t.props.history.goBack()}},"\u9009\u62e9\u57ce\u5e02")},t.getCityList=Object(i.a)(a.a.mark((function e(){var n,r,i,c,o,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)();case 2:if(200!==(n=e.sent).status){e.next=17;break}return r=t.formatCityList(n.body),i=r.CityList,c=r.cityIndex,e.next=7,Object(b.a)();case 7:return o=e.sent,u=o.status,s=o.body,200===u&&(i.hot=s,c.unshift("hot")),e.next=13,Object(g.c)();case 13:f=e.sent,c.unshift("#"),i["#"]=[f],t.setState({CityList:i,cityIndex:c});case 17:case"end":return e.stop()}}),e)}))),t.excueHeight=function(e){var n=e.index,r=t.state;return 36+50*r.CityList[r.cityIndex[n]].length},t.renderCityIndex=function(){var e=t.state,n=e.cityIndex,r=e.activeIndex;return n.map((function(e,n){return v.a.createElement("li",{key:e,className:"city-index-item",onClick:function(){t.listRef.scrollToRow(n)}},v.a.createElement("span",{className:r===n?"index-active":""},t.formatLetter(e,!0)))}))},t.onRowsRendered=function(e){var n=e.startIndex;t.state.activeIndex!==n&&t.setState({activeIndex:n})},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getCityList()}},{key:"render",value:function(){var t=this;return v.a.createElement("div",{className:"cityList"},this.navbai(),v.a.createElement(x.a,null,(function(e){var n=e.height,r=e.width;return v.a.createElement(x.c,{onRowsRendered:t.onRowsRendered,ref:function(e){return t.listRef=e},scrollToAlignment:"start",height:n,rowCount:t.state.cityIndex.length,rowHeight:t.excueHeight,rowRenderer:t.rowRenderer,width:r})})),v.a.createElement("ul",{className:"city-index"},this.renderCityIndex()))}}]),n}(h.Component));e.default=w},48:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return c}));var r=n(36);function a(t){return r.b.get("/area/info",{params:{name:t}})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r.b.get("/area/city",{params:{level:t}})}function c(){return r.b.get("/area/hot")}},56:function(t,e,n){"use strict";n(37),n(57)},57:function(t,e,n){},58:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(34)),a=f(n(30)),i=f(n(31)),c=f(n(32)),o=f(n(33)),u=f(n(35)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function f(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&(n[r[a]]=t[r[a]])}return n},d=function(t){function e(){return(0,a.default)(this,e),(0,c.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,o.default)(e,t),(0,i.default)(e,[{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.className,a=t.children,i=t.mode,c=t.icon,o=t.onLeftClick,f=t.leftContent,d=t.rightContent,p=l(t,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return s.createElement("div",(0,r.default)({},p,{className:(0,u.default)(n,e,e+"-"+i)}),s.createElement("div",{className:e+"-left",role:"button",onClick:o},c?s.createElement("span",{className:e+"-left-icon","aria-hidden":"true"},c):null,f),s.createElement("div",{className:e+"-title"},a),s.createElement("div",{className:e+"-right"},d))}}]),e}(s.Component);e.default=d,d.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}},t.exports=e.default}}]);
//# sourceMappingURL=15.35cb53e8.chunk.js.map